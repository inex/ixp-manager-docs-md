
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.ixpmanager.org/install/upgrade-v3/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.12">
    
    
      
        <title>Upgrade From v3 - IXP Manager Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upgrade-from-v3" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            

    <a href="https://www.ixpmanager.org/" style="color: #ffffff;">
      See our new website at <strong>www.ixpmanager.org</strong>.
    </a>


    <a href="https://twitter.com/ixpmanager" style="color: #ffffff;">
      For updates follow <strong>@ixpmanager</strong> on
      <span class="twemoji twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="color: rgb(0, 172, 238);"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
      </span> <strong>Twitter</strong>
    </a>


          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IXP Manager Documentation" class="md-header__button md-logo" aria-label="IXP Manager Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IXP Manager Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Upgrade From v3
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/inex/IXP-Manager" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IXP Manager Documentation" class="md-nav__button md-logo" aria-label="IXP Manager Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IXP Manager Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/inex/IXP-Manager" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../automated-script/" class="md-nav__link">
        Automated Script
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../maint-mode/" class="md-nav__link">
        Maintenance Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manually/" class="md-nav__link">
        Manual Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        Upgrading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../runtime/" class="md-nav__link">
        Runtime Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../next-steps/" class="md-nav__link">
        Post-Install Steps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../register/" class="md-nav__link">
        Join the Community
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          General Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          General Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/contacts/" class="md-nav__link">
        Contacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/cookies/" class="md-nav__link">
        Cookies & Privacy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/customers/" class="md-nav__link">
        Customers / Members
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/customer-notes/" class="md-nav__link">
        Customer Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/customer-tags/" class="md-nav__link">
        Customer Tags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/interfaces/" class="md-nav__link">
        Customer Connections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/dblogs/" class="md-nav__link">
        Database Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/email/" class="md-nav__link">
        Email
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/operational-notes/" class="md-nav__link">
        Operational Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/switches/" class="md-nav__link">
        Switches
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/users/" class="md-nav__link">
        Users
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/api/" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/as112/" class="md-nav__link">
        AS112
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/provisioning/" class="md-nav__link">
        Automated Provisioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/console-servers/" class="md-nav__link">
        Console Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/core-bundles/" class="md-nav__link">
        Core Bundles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/cronjobs/" class="md-nav__link">
        Cron Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/patch-panels/" class="md-nav__link">
        Cross Connects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/dns-arpa/" class="md-nav__link">
        DNS / ARPA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/docstore/" class="md-nav__link">
        Document Store
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grapher/introduction/" class="md-nav__link">
        Grapher
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/helpdesk/" class="md-nav__link">
        Helpdesk Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/irrdb/" class="md-nav__link">
        IRRDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/ixf-export/" class="md-nav__link">
        IX-F Member Export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/looking-glass/" class="md-nav__link">
        Looking Glass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/layer2-addresses/" class="md-nav__link">
        MAC Addresses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/manrs/" class="md-nav__link">
        MANRS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/member-export/" class="md-nav__link">
        Member Export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/mailing-lists/" class="md-nav__link">
        Mailing List Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/nagios/" class="md-nav__link">
        Nagios
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/patch-panels/" class="md-nav__link">
        Patch Panels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/peering-manager/" class="md-nav__link">
        Peering Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/peering-matrix/" class="md-nav__link">
        Peering Matrix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/peeringdb/" class="md-nav__link">
        PeeringDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/rir-objects/" class="md-nav__link">
        RIR Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/reseller/" class="md-nav__link">
        Reseller Functionality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/route-collectors/" class="md-nav__link">
        Route Collectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/route-servers/" class="md-nav__link">
        Route Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/routers/" class="md-nav__link">
        Router Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/rpki/" class="md-nav__link">
        RPKI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/skinning/" class="md-nav__link">
        Skinning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grapher/smokeping/" class="md-nav__link">
        Smokeping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/static-content/" class="md-nav__link">
        Static Content
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/tacacs/" class="md-nav__link">
        TACACS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Grapher
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Grapher
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grapher/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grapher/api/" class="md-nav__link">
        API &amp; Permissions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grapher/mrtg/" class="md-nav__link">
        Backend: MRTG
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grapher/sflow/" class="md-nav__link">
        Backend: sflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../grapher/smokeping/" class="md-nav__link">
        Backend: Smokeping
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Sflow Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Sflow Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/sflow/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/sflow-p2p/" class="md-nav__link">
        Peer-to-peer Graphs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/api/" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/ci/" class="md-nav__link">
        Continuous Integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/cla/" class="md-nav__link">
        Contributer License Agreement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/docs/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/foils.md" class="md-nav__link">
        Foil
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/forms/" class="md-nav__link">
        Forms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/frontend-crud/" class="md-nav__link">
        Frontend CRUD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/grapher/" class="md-nav__link">
        Grapher
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/helpders/" class="md-nav__link">
        Helpers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/looking-glass/" class="md-nav__link">
        Looking Glass
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/release-procedure/" class="md-nav__link">
        Release Procedure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/telescope/" class="md-nav__link">
        Telescope
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/users/" class="md-nav__link">
        Users
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/vagrant/" class="md-nav__link">
        Vagrant
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecations-removed-features" class="md-nav__link">
    Deprecations / Removed Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#duplicating-the-database" class="md-nav__link">
    Duplicating the Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-ixp-manager" class="md-nav__link">
    Install IXP Manager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initial-configuration-tasks" class="md-nav__link">
    Initial Configuration Tasks
  </a>
  
    <nav class="md-nav" aria-label="Initial Configuration Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-local-settings-configuration-laravel" class="md-nav__link">
    New Local Settings / Configuration (Laravel)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-database-schema" class="md-nav__link">
    Update the Database Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrate-plaintext-passwords-to-bcrypt" class="md-nav__link">
    Migrate Plaintext Passwords to Bcrypt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-one-complete" class="md-nav__link">
    Stage One Complete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mrtg-graphing-migration" class="md-nav__link">
    MRTG Graphing Migration
  </a>
  
    <nav class="md-nav" aria-label="MRTG Graphing Migration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#performing-the-migration" class="md-nav__link">
    Performing the Migration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#peer-to-peer-sflow-changes" class="md-nav__link">
    Peer to Peer / sflow Changes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="upgrade-from-v3">Upgrade From v3<a class="headerlink" href="#upgrade-from-v3" title="Permanent link"></a></h1>
<p>Due to the significant changes between IXP Manager v3 and v4, there is no in place upgrade process. The advised way to handle this is to install v4 in parallel and then switch over (by adjusting your DNS or Apache configuration for example) to the new v4 directory/server.</p>
<p>This documentation was compiled while performing an upgrade on three separate IXP Manager installations.</p>
<p><strong>Before you proceed, please check the requirements listed in <a href="../manually/">the official installation instructions</a>.</strong></p>
<p>If you need help, please <a href="https://www.ixpmanager.org/support.php">contact us via the public mailing list</a>.</p>
<p>If you find that this guide is insufficient, please <a href="../../dev/docs/">contribute back to this documentation</a>.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link"></a></h2>
<p>The upgrade process is quite involved and, depending how many IXP Manager features you use, may take the best part of a day.</p>
<p>The general steps are:</p>
<ol>
<li>Duplicate the Database (see below)</li>
<li>Install IXP Manager v4 (see below)</li>
<li>Initial configuration tasks (see below), including:</li>
<li>Configuration</li>
<li>Update the database schema</li>
<li>If appropriate, migrate plaintext passwords to bcrypt</li>
<li>MRTG Graphing Migration (including peer to peer changes) (see below)</li>
<li>Route collector / servers / AS112 configuration has changed - <a href="../../features/routers/">see here</a></li>
<li>DNS / ARPA export has changed - <a href="../../features/dns-arpa/">see here</a></li>
<li>Examine the new layer2 addresses feature and consideration migration - <a href="../../features/layer2-addresses/">see here</a></li>
<li>If you are using Bird, set up looking glasses - <a href="../../features/looking-glass/">see here</a></li>
<li>Set up you cross connect / patch panel management - <a href="../../features/patch-panels/">see here</a></li>
<li>Read up on <a href="../../features/skinning/">the new skinning features</a> and see if you need to update / duplicate any skinned files.</li>
</ol>
<p>You will note from the above that a number of features have been deprecated in favor of doing it in new ways. Our advice is to keep both v3 and v4 live in parallel and then migrate services piece meal. That way your route server configuration can continue pulling from v3 until you have set-up the v4 method. Just ensure that people do not make customer changes in either IXP Manager during this period (or, if they do, do it in both!).</p>
<h2 id="deprecations-removed-features">Deprecations / Removed Features<a class="headerlink" href="#deprecations-removed-features" title="Permanent link"></a></h2>
<p>As of IXP Manager v4 (certainly &gt;=v4.5), the following are no longer available:</p>
<ol>
<li><a href="https://github.com/inex/IXP-Manager/wiki/Route-Collector">v3 methods for generating route collector. configuration</a> - <a href="../../features/routers/">see here for the v4 method</a>.</li>
<li><a href="https://github.com/inex/IXP-Manager/wiki/Route-Server">v3 methods for generating route server configuration</a> - <a href="../../features/routers/">see here for the v4 method</a>.</li>
<li><a href="https://github.com/inex/IXP-Manager/wiki/AS112">v3 methods for generating AS112 BGP configuration</a> - <a href="../../features/as112/">see here for the v4 method</a>.</li>
<li><a href="https://github.com/inex/IXP-Manager/wiki/IRRDB-Prefixes">v3 method for IRRDB updates</a> - <a href="../../features/routers/">see here for the v4 method</a>.</li>
<li>TACACS+ and RADIUS templates - see old details <a href="https://github.com/inex/IXP-Manager/wiki/TACACS">here for TACACS+</a> and <a href="https://github.com/inex/IXP-Manager/wiki/RADIUS">here for RADIUS</a>.</li>
<li><a href="https://github.com/inex/IXP-Manager/wiki/ARPA-DNS-Population">v3 method for DNS/ARPA generation</a> - <a href="../../features/dns-arpa/">see here for the v4 method</a>.</li>
<li>Support for plaintext passwords - see below.</li>
</ol>
<h2 id="duplicating-the-database">Duplicating the Database<a class="headerlink" href="#duplicating-the-database" title="Permanent link"></a></h2>
<p>As we're installing in parallel, we want to duplicate the database.</p>
<p>When granting permissions on the new database, use your existing IXP Manager database credentials for ease of configuration.</p>
<div class="highlight"><pre><span></span><code>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-pXXX<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;CREATE DATABASE ixp4 CHARACTER SET = &quot;utf8mb4&quot; COLLATE = &quot;utf8mb4_unicode_ci&quot;;&#39;</span>

mysqldump<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-pXXX<span class="w"> </span>ixp<span class="w"> </span><span class="p">|</span><span class="w"> </span>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-pXXX<span class="w"> </span>ixp4

mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-pXXX<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;GRANT ALL ON ixp4.* TO `ixp`@`localhost` IDENTIFIED BY &quot;YYY&quot;;&#39;</span>

<span class="c1"># and test:</span>
mysql<span class="w"> </span>-u<span class="w"> </span>ixp<span class="w"> </span>-pYYY<span class="w"> </span>-h<span class="w"> </span>localhost<span class="w"> </span>ixp4
</code></pre></div>
<h2 id="install-ixp-manager">Install IXP Manager<a class="headerlink" href="#install-ixp-manager" title="Permanent link"></a></h2>
<p>This is very much a tl;dr version of <a href="../manually/">the official installation instructions</a> which you should review if you need additional help.</p>
<p><strong>Critically, these upgrade instructions were designed and tested against IXP Manager v4.5.0. You need to upgrade to this version first and then <a href="../upgrading/">follow the v4 upgrade instructions from there</a>.</strong></p>
<p>The code for IXP Manager is maintained on GitHub and the canonical repository is <a href="https://github.com/inex/IXP-Manager">inex/IXP-Manager</a>.</p>
<p>Log into the server where you wish to install IXP Manager and move to the directory where you wish to install (we use <code>/srv/ixpmanager</code> here as an example and which will be referred to as <code>$IXPROOT</code> below).</p>
<p>Note that it should not be checked out into any web exposed directory (e.g. do not checkout to <code>/var/www</code>).</p>
<div class="highlight"><pre><span></span><code><span class="nv">IXPROOT</span><span class="o">=</span>/srv/ixpmanager

<span class="c1"># get the source / application</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/inex/IXP-Manager.git<span class="w"> </span><span class="nv">$IXPROOT</span>
<span class="nb">cd</span><span class="w"> </span><span class="nv">$IXPROOT</span>
git<span class="w"> </span>checkout<span class="w"> </span>v4.5.0

<span class="c1"># Using https://getcomposer.org/</span>
composer.phar<span class="w"> </span>install

<span class="c1"># Using https://bower.io/</span>
bower<span class="w"> </span>install

<span class="c1"># Start with the example configuration and edit.</span>
<span class="c1"># Read the official documentation for help.</span>
<span class="c1"># Ensure you configure the database.</span>
<span class="c1"># More notes on this follow below.</span>
cp<span class="w"> </span>.env.example<span class="w"> </span>.env
php<span class="w"> </span>artisan<span class="w"> </span>key:generate
joe<span class="w"> </span>.env

<span class="c1"># File system permissions</span>
chown<span class="w"> </span>-R<span class="w"> </span>www-data:<span class="w"> </span>var/<span class="w"> </span>storage/<span class="w"> </span>bootstrap/cache<span class="w"> </span>database/Proxies
</code></pre></div>
<h2 id="initial-configuration-tasks">Initial Configuration Tasks<a class="headerlink" href="#initial-configuration-tasks" title="Permanent link"></a></h2>
<h3 id="new-local-settings-configuration-laravel">New Local Settings / Configuration (Laravel)<a class="headerlink" href="#new-local-settings-configuration-laravel" title="Permanent link"></a></h3>
<p>IXP Manager v4 uses a new PHP framework (Zend Framework swapped for Laravel). As such, all the older configuration options (from <code>application/configs/application.ini</code>) need to be ported to <code>.env</code>.</p>
<p>The <a href="https://github.com/vlucas/phpdotenv">php dotenv</a> file (<code>.env</code>) is where all the new configuration options go. These in turn are used by the configuration files under <code>config/</code>.</p>
<p><strong>NB: Where possible, place local changes into <code>.env</code> rather than changing the config files as these files are under version control. See <a href="http://laravel.com/docs/5.4/installation#configuration">Laravel's documentation on this</a> and email the mailing list for help.</strong></p>
<p>Once you have worked your way through <code>.env</code>, move into the <code>$IXPROOT/config</code> directory and - as appropriate for your own installation - examine each config file that ends in <code>.dist</code>. If you use / need any features in these files, copy then such as:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$IXPROOT</span>/config
cp<span class="w"> </span>xxxx.php.dist<span class="w"> </span>xxxx.php
</code></pre></div>
<p>Then edit the resultant <code>.php</code> file (or, better, where <code>config()</code> options exist, add them to <code>.env</code>).</p>
<p>These <code>.dist</code> files represent v3 functionality that has not yet been fully ported to v4/Laravel.</p>
<h3 id="update-the-database-schema">Update the Database Schema<a class="headerlink" href="#update-the-database-schema" title="Permanent link"></a></h3>
<p>There's about 50 schema changed between the end of v3 and v4.4.</p>
<p>View the required changes with:</p>
<div class="highlight"><pre><span></span><code>./artisan doctrine:schema:update --sql
</code></pre></div>
<p>And apply with:</p>
<p><div class="highlight"><pre><span></span><code>./artisan doctrine:schema:update --force
</code></pre></div>
 Note that this may take a few minutes if you have a lot of data such as BGP session data.</p>
<h3 id="migrate-plaintext-passwords-to-bcrypt">Migrate Plaintext Passwords to Bcrypt<a class="headerlink" href="#migrate-plaintext-passwords-to-bcrypt" title="Permanent link"></a></h3>
<p>Since v4.5, we <a href="../../usage/users/#password-hashing">no longer allow plaintext passwords</a>. If you were using plaintext passwords, you need to convert them to bcrypt as follows:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="nv">$IXPROOT</span>

<span class="c1"># dummy run to see what happens:</span>
php<span class="w"> </span>artisan<span class="w"> </span>utils:convert-plaintext-password

<span class="c1"># really convert passwords and save to database:</span>
php<span class="w"> </span>artisan<span class="w"> </span>utils:convert-plaintext-password<span class="w"> </span>--force
</code></pre></div>
<h3 id="stage-one-complete">Stage One Complete<a class="headerlink" href="#stage-one-complete" title="Permanent link"></a></h3>
<p>You should be able to point Apache / your web server at the new IXP Manager installation and log in.</p>
<h2 id="mrtg-graphing-migration">MRTG Graphing Migration<a class="headerlink" href="#mrtg-graphing-migration" title="Permanent link"></a></h2>
<p>We've implemented a new graphing backend called <a href="../../grapher/introduction/">Grapher</a>. One of the changes is that the graphing directory structure and file-naming conventions have changed. Primarily, we've replaced non-static handles (such as database fields like <code>customer.shortname</code>, <code>physicalinterface.monitorindex</code> and <code>switcher.name</code> with immutable primary keys).</p>
<p>As such, you need to both rename the statistics directory structure and regenerate the configuration.</p>
<p><strong>It is strongly recommended you copy your existing files and do this in parallel or, at least keep a backup.</strong> Also, stop the MRTG daemon before starting.</p>
<h3 id="performing-the-migration">Performing the Migration<a class="headerlink" href="#performing-the-migration" title="Permanent link"></a></h3>
<p>First, you'll need to update your local configuration in <code>.env</code> by setting something like:</p>
<div class="highlight"><pre><span></span><code>GRAPHER_BACKENDS=&quot;mrtg&quot;
GRAPHER_BACKEND_MRTG_LOGDIR=&quot;/path/to/new/mrtg/data&quot;
GRAPHER_BACKEND_MRTG_WORKDIR=&quot;/path/to/new/mrtg/data&quot;
GRAPHER_CACHE_ENABLED=true
</code></pre></div>
<p>See the <a href="../../grapher/introduction/">Grapher</a> documentation for full details of what these mean.</p>
<p>You'll then need to migrate all your MRTG files to the new naming scheme. Run the commands below twice. Once to verify the output and a second time piped to sh (<code>| sh</code>) to actually execute the commands.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># set a variable for what will become the &#39;old&#39; files for convenience</span>
<span class="nv">OLDMRTG</span><span class="o">=</span>/srv/old-mrtg

<span class="c1"># position ourselves in the IXP Manager root directory</span>
<span class="nb">cd</span><span class="w"> </span><span class="nv">$IXPROOT</span>

<span class="c1"># stop mrtg</span>
service<span class="w"> </span>mrtg<span class="w"> </span>stop<span class="w">  </span><span class="c1"># or as appropriate for your platform</span>

<span class="c1"># Migrate IXP graphs.</span>
<span class="c1">#</span>
<span class="c1"># In v3 of IXP Manager, the name of this was set by a database</span>
<span class="c1"># parameter in the IXP table called &#39;aggregate graph name&#39;.</span>
<span class="c1"># You will be able to spot it in the old MRTG files where the</span>
<span class="c1"># old IXP file is named something like: &#39;ixp_peering-XXXXX-bits.log&#39;.</span>
<span class="c1"># The &#39;XXXXXX&#39; bit is the aggregate name you need to replace in the below:</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-X<span class="w"> </span>--agg-name<span class="o">=</span>XXXXXX
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-X<span class="w"> </span>--agg-name<span class="o">=</span>XXXXXX<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Migrate infrastructure graphs.</span>
<span class="c1">#</span>
<span class="c1"># In v3 of IXP Manager, the name of this was set by a database</span>
<span class="c1"># parameter in the infrastructure table called &#39;aggregate graph name&#39;.</span>
<span class="c1"># You will be able to spot it in the old MRTG files where the</span>
<span class="c1"># old IXP file is named something like: &#39;ixp_peering-XXXXX-bits.log&#39;.</span>
<span class="c1"># The &#39;XXXXXX&#39; bit is the aggregate name you need to replace in the below:</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-I
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-I<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Migrate switch graphs</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-S
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-S<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Migrate trunk graphs and configuration.</span>
<span class="c1"># If you had not configured trunk graphs you can skip this. We are</span>
<span class="c1"># planning to (very soon - Q2/3 2017) fully integrate this into IXP</span>
<span class="c1"># Manager.</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-T
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-T<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>migrate-trunk-config

<span class="c1"># Create member directories</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mkdir<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-M
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mkdir<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-M<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Migrate member physical interface graphs</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-P
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-P<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Migrate member LAG graphs</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-Q
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-Q<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Migrate member aggregate graphs</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-C
php<span class="w"> </span>artisan<span class="w"> </span>grapher:backend:mrtg:upgrade<span class="w"> </span>mv<span class="w"> </span>-L<span class="w"> </span><span class="nv">$OLDMRTG</span><span class="w"> </span>-C<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh

<span class="c1"># Regenerate mrtg configuration</span>
php<span class="w"> </span>artisan<span class="w"> </span>grapher:generate-configuration<span class="w"> </span>-B<span class="w"> </span>mrtg<span class="w"> </span>&gt;<span class="w"> </span>path/to/mrtg.conf

<span class="c1"># Start mrtg</span>
service<span class="w"> </span>mrtg<span class="w"> </span>start<span class="w">  </span><span class="c1"># or as appropriate for your platform</span>
</code></pre></div>
<h2 id="peer-to-peer-sflow-changes">Peer to Peer / sflow Changes<a class="headerlink" href="#peer-to-peer-sflow-changes" title="Permanent link"></a></h2>
<p>The previous version of IXP Manager used a script called <code>sflow-graph.php</code> which was installed on the sflow server to create graphs on demand. IXP Manager v4 does not use this but pulls the required RRD files directly.</p>
<p>If you have this on the same server or can expose it using NFS for example, then set the path accordingly in <code>.env</code>:</p>
<div class="highlight"><pre><span></span><code>GRAPHER_BACKEND_SFLOW_ROOT=&quot;/srv/ixpmatrix&quot;
</code></pre></div>
<p>If you have implemented this via a web server on the sflow server (as we typically do at INEX), then you need to expose the RRD data directory to IXP Manager using an Apache config such as:</p>
<div class="highlight"><pre><span></span><code>Alias /grapher-sflow /srv/ixpmatrix

&lt;Directory &quot;/srv/ixpmatrix&quot;&gt;
    Options None
    AllowOverride None
    &lt;RequireAny&gt;
            Require ip 192.0.2.0/24
            Require ip 2001:db8::/32
    &lt;/RequireAny&gt;
&lt;/Directory&gt;
</code></pre></div>
<p>and update <code>.env</code> for this with something like:</p>
<div class="highlight"><pre><span></span><code>GRAPHER_BACKEND_SFLOW_ROOT=&quot;http://www.example.com/grapher-sflow&quot;
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 20, 2020</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2017-2023, Internet Neutral Exchange Association Company Limited by Guarantee (INEX).<br><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" /></a>&nbsp;This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/inex/IXP-Manager" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ixpmanager" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/ixpmanager/" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/channel/UCeW2fmMTBtE4fnlmg-2-evA" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.ixpmanager.org/" target="_blank" rel="noopener" title="www.ixpmanager.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.4c2.2 20.4 3.3 41.8 3.3 64zm28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 21 58.2 27 94.7zm-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6zM8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zm186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6h116.7zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["tabs"], "search": "../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.4b2c34cd.min.js"></script>
      
    
  </body>
</html>